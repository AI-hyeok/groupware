<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <!-- React 앱 로드에 필요한 Meta 태그 -->
    <meta name="jwt-token" th:content="${#request.getHeader('Authorization')}">
    <meta name="user-id" th:content="${#request.getAttribute('id')}">
    <meta name="user-role" th:content="${#request.getAttribute('role')}">
    <meta name="user-emp-num" th:content="${#request.getAttribute('empNum')}">
</head>
<body>
<!-- React 앱이 마운트될 루트 요소 -->
<div id="admin-root"></div>

<!-- React 앱 스크립트 로드 -->
<!-- 개발 환경에서는 리액트 서버 URL, 프로덕션 환경에서는 빌드된 정적 파일 경로 사용 -->
<script th:src="${@environment.getProperty('react.admin.url') ?: '/static/admin/js/main.js'}"></script>

<!-- JWT 토큰 전달을 위한 스크립트 -->
<script th:inline="javascript">
    // 토큰을 리액트 앱에 전달
    window.AUTH_DATA = {
        token: [[${#request.getHeader('Authorization')?.substring(7)}]],
        userId: [[${#request.getAttribute('id')}]],
        empNum: [[${#request.getAttribute('empNum')}]],
        role: [[${#request.getAttribute('role')}]]
    };
</script>
</body>
</html>
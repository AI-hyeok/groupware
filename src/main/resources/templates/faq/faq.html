<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TECH X - 그룹웨어 FAQ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-color: #dee2e6;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 100px auto;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }

        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .faq-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 2rem;
        }

        .chatbot-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            height: calc(100vh - 4rem);
            position: sticky;
            top: 2rem;
            display: flex;
            flex-direction: column;
        }

        .section-title {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-top: 0;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
        }

        .faq-categories {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .faq-category {
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            background-color: var(--light-color);
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: background-color 0.3s;
        }

        .faq-category:hover {
            background-color: #e9ecef;
        }

        .faq-category.active {
            background-color: var(--primary-color);
            color: white;
        }

        .search-box {
            margin-bottom: 1.5rem;
            position: relative;

        }

        .search-box input {
            width: 92%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
        }

        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary-color);
        }

        .faq-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .faq-item {
            margin-bottom: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .faq-question {
            padding: 1rem;
            background-color: var(--light-color);
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-question:hover {
            background-color: #e9ecef;
        }

        .faq-answer {
            padding: 1rem;
            display: none;
            border-top: 1px solid var(--border-color);
            background-color: white;
        }

        .faq-answer.show {
            display: block;
        }

        .chatbot-header {
            padding: 1rem;
            background-color: var(--primary-color);
            color: white;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chatbot-header h3 {
            margin: 0;
        }

        .chatbot-messages {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-message {
            display: flex;
            margin-bottom: 0.5rem;
        }

        .user-message {
            justify-content: flex-end;
        }

        .bot-message {
            justify-content: flex-start;
        }

        .message-content {
            padding: 0.75rem 1rem;
            border-radius: 18px;
            max-width: 80%;
        }

        .user-message .message-content {
            background-color: var(--primary-color);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .bot-message .message-content {
            background-color: var(--light-color);
            border-bottom-left-radius: 4px;
        }

        .chatbot-input {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 0.5rem;
        }

        .chatbot-input input {
            flex-grow: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
        }

        .chatbot-input button {
            padding: 0.75rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .chatbot-input button:hover {
            background-color: #0069d9;
        }

        .faq-pagination {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
        }

        .page-link {
            padding: 0.5rem 0.75rem;
            margin: 0 0.25rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--primary-color);
            text-decoration: none;
            transition: background-color 0.3s;
            cursor: pointer;
        }

        .page-link:hover {
            background-color: #e9ecef;
        }

        .page-link.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .suggested-questions {
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .suggested-questions h4 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            color: var(--dark-color);
        }

        .suggested-question {
            padding: 0.5rem;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .suggested-question:hover {
            background-color: #e9ecef;
        }

        .typing-indicator {
            display: inline-flex;
            align-items: center;
            gap: 3px;
        }

        .typing-indicator span {
            width: 6px;
            height: 6px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            display: inline-block;
            animation: typing 1.5s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-6px);
            }
        }
    </style>

    <!-- 헤더 에셋 포함 -->
    <th:block th:replace="fragments/header :: headerAssets"></th:block>
</head>
<body>
<!-- 헤더 포함 -->
<div th:replace="fragments/header :: header"></div>
<div class="container">
    <div class="faq-section">
        <h2 class="section-title">자주 묻는 질문 (FAQ)</h2>

        <div class="faq-categories">
            <div class="faq-category active" data-category="all">전체</div>
            <div class="faq-category" data-category="account">계정 관리</div>
            <div class="faq-category" data-category="booking">예약 시스템</div>
            <div class="faq-category" data-category="approval">전자결재</div>
            <div class="faq-category" data-category="mail">메일</div>
            <div class="faq-category" data-category="calendar">일정/캘린더</div>
            <div class="faq-category" data-category="etc">기타</div>
        </div>

        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="faq-search" placeholder="질문 검색...">
        </div>

        <ul class="faq-list">
            <!-- 계정 관리 카테고리 FAQ -->
            <li class="faq-item" data-category="account">
                <div class="faq-question">
                    비밀번호를 잊어버렸습니다. 어떻게 재설정하나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>비밀번호 재설정은 다음과 같은 방법으로 가능합니다:</p>
                    <ol>
                        <li>로그인 페이지에서 '비밀번호 찾기' 버튼을 클릭합니다.</li>
                        <li>등록된 이메일 주소를 입력합니다.</li>
                        <li>이메일로 받은 링크를 통해 새 비밀번호를 설정합니다.</li>
                    </ol>
                    <p>이메일이 오지 않았다면 스팸 폴더를 확인하거나 시스템 관리자에게 문의하세요.</p>
                </div>
            </li>
            <li class="faq-item" data-category="account">
                <div class="faq-question">
                    내 계정 정보는 어디서 변경할 수 있나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>계정 정보 변경은 다음 경로를 통해 가능합니다:</p>
                    <ol>
                        <li>우측 상단의 내 이름을 클릭합니다.</li>
                        <li>'마이페이지' 메뉴를 선택합니다.</li>
                        <li>변경하고자 하는 정보를 수정하고 '저장' 버튼을 누릅니다.</li>
                    </ol>
                    <p>단, 이름, 부서, 직책 등의 기본 정보는 관리자만 변경할 수 있습니다. 해당 정보 변경이 필요한 경우 시스템 관리자에게 요청하세요.</p>
                </div>
            </li>

            <!-- 예약 시스템 카테고리 FAQ -->
            <li class="faq-item" data-category="booking">
                <div class="faq-question">
                    회의실 예약은 최대 몇 일 전부터 가능한가요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>회의실 예약가능날짜는 제한되어있지 않습니다. 단, 다음 사항에 유의하세요:</p>
                    <ul>
                        <li>관리자로 부터 특정 사유에 의해 취소될 수 있습니다.</li>
                        <li>최소 1시간 부터 예약이 가능합니다.</li>
                        <li>예약은 업무 시간 내에만 가능합니다 (9:00 ~ 18:00).</li>
                    </ul>
                    <p>예약 후 불참 시 예약 패널티가 부과될 수 있으니 참고하시기 바랍니다.</p>
                </div>
            </li>
            <li class="faq-item" data-category="booking">
                <div class="faq-question">
                    비품 대여 절차는 어떻게 되나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>비품 대여는 다음 절차를 따릅니다:</p>
                    <ol>
                        <li>사이드 바에서 '예약' 버튼을 선택합니다.</li>
                        <li>'예약하기'에서 '비품 예약'을 선택합니다.</li>
                        <li>대여할 비품의 개수를 선택하고 다음 단계로 넘어갑니다.</li>
                        <li>예약 날짜와 시간을 설정하고 사용 목적을 작성합니다.</li>
                        <li>예약 가능 여부를 확인하고 '예약완료' 버튼을 클릭합니다.</li>
                    </ol>
                    <p>예약이 불가능한 경우엔 해당 시간에 예약이 있는 것이니 일정을 다시 설정해주시길 바랍니다.</p>
                </div>
            </li>

            <!-- 전자결재 카테고리 FAQ -->
            <li class="faq-item" data-category="approval">
                <div class="faq-question">
                    전자결재 관련 용어가 궁금해요
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>전자결재 관련 용어는 다음과 같이 있습니다.</p>
                    <ol>
                        <li>어쩌구</li>
                        <li>저쩌구</li>
                        <li>작성부탁해여 종훈님</li>
                    </ol>
                    <p>자세한 사항은 관리자에게 문의 바랍니다.</p>
                </div>
            </li>
            <li class="faq-item" data-category="approval">
                <div class="faq-question">
                    전자결재는 어떠한 방식으로 진행되나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>전자결재는 다음과 같이 진행됩니다:</p>
                    <ul>
                        <li>1. 어쩌꾸</li>
                        <li>2. 저쩌구</li>
                        <li>3. 마루킁킁</li>
                    </ul>
                </div>
            </li>

            <!-- 메일 카테고리 FAQ -->
            <li class="faq-item" data-category="mail">
                <div class="faq-question">
                    메일 전송이 안돼요
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>메일전송이 되지 않는 경우는 다음과 같이 존재합니다.</p>
                    <ol>
                        <li>서버 문제</li>
                        <li>클라이언트 문제</li>
                        <li>몰라 내가 어케알아</li>
                        <li>메일 쓰지 말고 직접가서 전달하세요</li>
                    </ol>
                    <p>알아서 해결하시길 바랍니다.</p>
                </div>
            </li>
            <li class="faq-item" data-category="mail">
                <div class="faq-question">
                    수신된 메일이 보이지 않습니다.
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>메일 수신함이 출력되지 않는 경우는 다음과 같습니다:</p>
                    <ol>
                        <li>db문제</li>
                        <li>서버 문제</li>
                        <li>윤진언니가 해결해주겠지 뭐</li>
                    </ol>
                    <p>화이팅</p>
                </div>
            </li>

            <!-- 일정/캘린더 카테고리 FAQ -->
            <li class="faq-item" data-category="calendar">
                <div class="faq-question">
                    공용 캘린더와 개인 캘린더는 어떻게 구분되나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>공용 캘린더와 개인 캘린더는 다음과 같이 구분됩니다:</p>
                    <h4>공용 캘린더</h4>
                    <ul>
                        <li>회사의 주요 일정을 보여줍니다.</li>
                        <li>관리자만이 회사의 일정을 추가/삭제/수정할 수 있습니다.</li>
                        <li>회사 구성원 전체가 일정을 확인할 수 있습니다.</li>
                    </ul>
                    <h4>개인 캘린더</h4>
                    <ul>
                        <li>개인만 볼 수 있는 일정을 관리합니다.</li>
                        <li>자신의 근태기록을 확인할 수 있습니다.</li>
                        <li>개인 일정은 다른 사용자에게 공개되지 않습니다.</li>
                    </ul>
                </div>
            </li>
            <li class="faq-item" data-category="calendar">
                <div class="faq-question">
                    개인 캘린더는 어디에서 확인할 수 있나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>개인 캘린더는 다음에서 확인할 수 있습니다:</p>
                    <ol>
                        <li>사이드 바에서 '근태관리'를 선택합니다.</li>
                        <li>내 근무 > 근무 현황에서 확인하실 수 있습니다.</li>
                    </ol>
                </div>
            </li>

            <!-- 기타 카테고리 FAQ -->
            <li class="faq-item" data-category="etc">
                <div class="faq-question">
                    모바일 앱은 어디서 다운로드 받을 수 있나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>그룹웨어 모바일 앱은 다음 스토어에서 다운로드 받을 수 있습니다:</p>
                    <ul>
                        <li>iOS 기기: Apple App Store에서 'TECH X 그룹웨어' 검색</li>
                        <li>Android 기기: Google Play Store에서 'TECH X 그룹웨어' 검색</li>
                    </ul>
                </div>
            </li>
            <li class="faq-item" data-category="etc">
                <div class="faq-question">
                    시스템 오류는 어디에 문의해야 하나요?
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>시스템 오류는 다음 경로를 통해 문의할 수 있습니다:</p>
                    <ol>
                        <li>IT지원팀 이메일('texhX@techX.kro.kr')로 연락 바랍니다.</li>
                        <li>긴급한 경우 IT지원팀 내선번호(1234)로 연락주세요.</li>
                    </ol>
                    <p>오류 신고 시 다음 정보를 포함하면 빠른 해결에 도움이 됩니다:</p>
                    <ul>
                        <li>오류 발생 일시</li>
                        <li>오류 발생 메뉴 또는 기능</li>
                        <li>오류 메시지(캡처 화면 첨부 권장)</li>
                        <li>오류 발생 전 수행한 작업</li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>

    <div class="chatbot-section">
        <div class="chatbot-header">
            <h3><i class="fas fa-robot"></i> AI 도우미</h3>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="chat-message bot-message">
                <div class="message-content">
                    안녕하세요! TECH X 그룹웨어 AI 도우미입니다. 그룹웨어 사용 중 궁금한 점이 있으면 무엇이든 물어보세요.
                </div>
            </div>

            <div class="suggested-questions">
                <h4>자주 찾는 질문</h4>
                <div class="suggested-question">비밀번호를 변경하고 싶어요.</div>
                <div class="suggested-question">회의실 예약은 어떻게 하나요?</div>
                <div class="suggested-question">비밀번호는 어떻게 재설정하나요?</div>
            </div>
        </div>

        <div class="chatbot-input">
            <input type="text" id="chatbot-input-text" placeholder="질문을 입력하세요...">
            <button id="chatbot-send"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // FAQ 아코디언 기능
        const faqQuestions = document.querySelectorAll('.faq-question');
        faqQuestions.forEach(question => {
            question.addEventListener('click', function() {
                const answer = this.nextElementSibling;
                const isOpen = answer.classList.contains('show');

                // 현재 열린 FAQ 답변 닫기
                document.querySelectorAll('.faq-answer.show').forEach(openAnswer => {
                    if (openAnswer !== answer) {
                        openAnswer.classList.remove('show');
                        openAnswer.previousElementSibling.querySelector('i').classList.remove('fa-chevron-up');
                        openAnswer.previousElementSibling.querySelector('i').classList.add('fa-chevron-down');
                    }
                });

                // 클릭한 FAQ 열기/닫기
                answer.classList.toggle('show');

                // 아이콘 변경
                const icon = this.querySelector('i');
                if (isOpen) {
                    icon.classList.remove('fa-chevron-up');
                    icon.classList.add('fa-chevron-down');
                } else {
                    icon.classList.remove('fa-chevron-down');
                    icon.classList.add('fa-chevron-up');
                }
            });
        });

        // 카테고리 필터링
        const faqCategories = document.querySelectorAll('.faq-category');
        faqCategories.forEach(category => {
            category.addEventListener('click', function() {
                // 활성 카테고리 변경
                document.querySelector('.faq-category.active').classList.remove('active');
                this.classList.add('active');

                const selectedCategory = this.getAttribute('data-category');
                const faqItems = document.querySelectorAll('.faq-item');

                // 모든 FAQ 항목에 대해 카테고리 필터링 적용
                faqItems.forEach(item => {
                    if (selectedCategory === 'all' || item.getAttribute('data-category') === selectedCategory) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        });

        // 검색 기능
        const searchInput = document.getElementById('faq-search');
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const faqItems = document.querySelectorAll('.faq-item');

            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question').textContent.toLowerCase();
                const answer = item.querySelector('.faq-answer').textContent.toLowerCase();

                if (question.includes(searchTerm) || answer.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        // AI 챗봇 기능
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input-text');
        const chatbotSend = document.getElementById('chatbot-send');
        const suggestedQuestions = document.querySelectorAll('.suggested-question');

        // 미리 준비된 FAQ 데이터
        const faqData = [
            {
                question: '비밀번호를 잊어버렸습니다. 어떻게 재설정하나요?',
                answer: '비밀번호 재설정은 다음과 같은 방법으로 가능합니다: 1) 로그인 페이지에서 \'비밀번호 찾기\' 버튼을 클릭합니다. 2) 등록된 이메일 주소를 입력합니다. 3) 이메일로 받은 링크를 통해 새 비밀번호를 설정합니다. 이메일이 오지 않았다면 스팸 폴더를 확인하거나 시스템 관리자에게 문의하세요.'
            },
            {
                question: '내 계정 정보는 어디서 변경할 수 있나요?',
                answer: '계정 정보 변경은 다음 경로를 통해 가능합니다: 1) 우측 상단의 내 이름을 클릭합니다. 2) \'마이페이지\' 메뉴를 선택합니다. 3) 변경하고자 하는 정보를 수정하고 \'저장\' 버튼을 누릅니다. 단, 이름, 부서, 직책 등의 기본 정보는 관리자만 변경할 수 있습니다. 해당 정보 변경이 필요한 경우 시스템 관리자에게 요청하세요.'
            },
            {
                question: '회의실 예약은 최대 몇 일 전부터 가능한가요?',
                answer: '회의실 예약가능날짜는 제한되어있지 않습니다. 단, 다음 사항에 유의하세요: 1) 관리자로 부터 특정 사유에 의해 취소될 수 있습니다. 2) 최소 1시간 부터 예약이 가능합니다. 3) 예약은 업무 시간 내에만 가능합니다 (9:00 ~ 18:00). 예약 후 불참 시 예약 패널티가 부과될 수 있으니 참고하시기 바랍니다.'
            },
            {
                question: '비품 대여 절차는 어떻게 되나요?',
                answer: '비품 대여는 다음 절차를 따릅니다: 1) 사이드 바에서 \'예약\' 버튼을 선택합니다. 2) \'예약하기\'에서 \'비품 예약\'을 선택합니다. 3) 대여할 비품의 개수를 선택하고 다음 단계로 넘어갑니다. 4) 예약 날짜와 시간을 설정하고 사용 목적을 작성합니다. 5) 예약 가능 여부를 확인하고 \'예약완료\' 버튼을 클릭합니다. 예약이 불가능한 경우엔 해당 시간에 예약이 있는 것이니 일정을 다시 설정해주시길 바랍니다.'
            },
            {
                question: '전자결재 관련 용어가 궁금해요',
                answer: '전자결재 관련 용어는 다음과 같이 있습니다. 1) 어쩌구 2) 저쩌구 3) 작성부탁해여 종훈님. 자세한 사항은 관리자에게 문의 바랍니다.'
            },
            {
                question: '전자결재는 어떠한 방식으로 진행되나요?',
                answer: '전자결재는 다음과 같이 진행됩니다: 1. 어쩌꾸 2. 저쩌구 3. 마루킁킁'
            },
            {
                question: '메일 전송이 안돼요',
                answer: '메일전송이 되지 않는 경우는 다음과 같이 존재합니다. 1. 서버 문제 2. 클라이언트 문제 3. 몰라 내가 어케알아 4. 메일 쓰지 말고 직접가서 전달하세요. 알아서 해결하시길 바랍니다.'
            },
            {
                question: '수신된 메일이 보이지 않습니다.',
                answer: '메일 수신함이 출력되지 않는 경우는 다음과 같습니다: 1. db문제 2. 서버 문제 3. 윤진언니가 해결해주겠지 뭐. 화이팅!'
            },
            {
                question: '공용 캘린더와 개인 캘린더는 어떻게 구분되나요?',
                answer: '공용 캘린더와 개인 캘린더는 다음과 같이 구분됩니다: 공용 캘린더: 1) 회사의 주요 일정을 보여줍니다. 2) 관리자만이 회사의 일정을 추가/삭제/수정할 수 있습니다. 3) 회사 구성원 전체가 일정을 확인할 수 있습니다. 개인 캘린더: 1) 개인만 볼 수 있는 일정을 관리합니다. 2) 자신의 근태기록을 확인할 수 있습니다. 3) 개인 일정은 다른 사용자에게 공개되지 않습니다.'
            },
            {
                question: '개인 캘린더는 어디에서 확인할 수 있나요?',
                answer: '개인 캘린더는 다음에서 확인할 수 있습니다: 1) 사이드 바에서 \'근태관리\'를 선택합니다. 2) 내 근무 > 근무 현황에서 확인하실 수 있습니다.'
            },
            {
                question: '모바일 앱은 어디서 다운로드 받을 수 있나요?',
                answer: '그룹웨어 모바일 앱은 다음 스토어에서 다운로드 받을 수 있습니다: iOS 기기: Apple App Store에서 \'TECH X 그룹웨어\' 검색, Android 기기: Google Play Store에서 \'TECH X 그룹웨어\' 검색'
            },
            {
                question: '시스템 오류는 어디에 문의해야 하나요?',
                answer: '시스템 오류는 다음 경로를 통해 문의할 수 있습니다: 1) IT지원팀 이메일(\'texhX@techX.kro.kr\')로 연락 바랍니다. 2) 긴급한 경우 IT지원팀 내선번호(1234)로 연락주세요. 오류 신고 시 다음 정보를 포함하면 빠른 해결에 도움이 됩니다: 오류 발생 일시, 오류 발생 메뉴 또는 기능, 오류 메시지(캡처 화면 첨부 권장), 오류 발생 전 수행한 작업'
            }
        ];

        // 챗봇 메시지 추가 함수
        function addChatMessage(message, isUser = false) {
            const messageElement = document.createElement('div');
            messageElement.className = `chat-message ${isUser ? 'user-message' : 'bot-message'}`;

            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.textContent = message;

            messageElement.appendChild(messageContent);
            chatbotMessages.appendChild(messageElement);

            // 스크롤을 최하단으로 이동
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // 챗봇 응답 생성 함수
        function generateBotResponse(userMessage) {
            // 타이핑 표시기 추가
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'chat-message bot-message typing-indicator-container';

            const typingContent = document.createElement('div');
            typingContent.className = 'message-content';

            const typingDots = document.createElement('div');
            typingDots.className = 'typing-indicator';
            typingDots.innerHTML = '<span></span><span></span><span></span>';

            typingContent.appendChild(typingDots);
            typingIndicator.appendChild(typingContent);
            chatbotMessages.appendChild(typingIndicator);

            // 스크롤을 최하단으로 이동
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

            // 간단한 자연어 처리로 가장 적합한 FAQ 찾기
            const userMessageLower = userMessage.toLowerCase();

            setTimeout(() => {
                // 타이핑 표시기 제거
                chatbotMessages.removeChild(typingIndicator);

                // 특정 키워드에 기반한 응답
                if (userMessageLower.includes('비밀번호') && userMessageLower.includes('잊어') ||
                    userMessageLower.includes('비밀번호') && userMessageLower.includes('찾기') ||
                    userMessageLower.includes('비밀번호') && userMessageLower.includes('재설정')) {
                    // 비밀번호 찾기 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('잊어버렸'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('비밀번호') && userMessageLower.includes('변경')) {
                    // 비밀번호 변경 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('변경하고'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('계정') ||
                    (userMessageLower.includes('내') && userMessageLower.includes('정보'))) {
                    // 계정 정보 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('계정 정보'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('회의실') && userMessageLower.includes('예약')) {
                    // 회의실 예약 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('회의실 예약'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('비품') ||
                    (userMessageLower.includes('대여') && !userMessageLower.includes('회의실'))) {
                    // 비품 대여 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('비품 대여'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('전자결재') && userMessageLower.includes('용어')) {
                    // 전자결재 용어 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('용어'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('전자결재') &&
                    (userMessageLower.includes('진행') || userMessageLower.includes('방식') ||
                        userMessageLower.includes('절차') || userMessageLower.includes('어떻게'))) {
                    // 전자결재 진행 방식 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('어떻게 진행'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('메일') &&
                    (userMessageLower.includes('전송') || userMessageLower.includes('안돼') ||
                        userMessageLower.includes('안 돼') || userMessageLower.includes('못 보내'))) {
                    // 메일 전송 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('전송이 안'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('메일') &&
                    (userMessageLower.includes('수신') || userMessageLower.includes('받은') ||
                        userMessageLower.includes('안 보여') || userMessageLower.includes('안보여'))) {
                    // 메일 수신함 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('수신된 메일'));
                    addChatMessage(faq.answer);
                }
                else if ((userMessageLower.includes('공용') || userMessageLower.includes('개인')) &&
                    userMessageLower.includes('캘린더')) {
                    // 캘린더 구분 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('구분'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('개인') && userMessageLower.includes('캘린더') &&
                    (userMessageLower.includes('어디') || userMessageLower.includes('확인'))) {
                    // 개인 캘린더 확인 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('어디에서 확인'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('모바일') || userMessageLower.includes('앱') ||
                    userMessageLower.includes('어플')) {
                    // 모바일 앱 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('모바일 앱'));
                    addChatMessage(faq.answer);
                }
                else if (userMessageLower.includes('오류') || userMessageLower.includes('에러') ||
                    userMessageLower.includes('문의')) {
                    // 시스템 오류 관련 질문
                    const faq = faqData.find(item => item.question.toLowerCase().includes('시스템 오류'));
                    addChatMessage(faq.answer);
                }
                else {
                    // 일치하는 키워드가 없을 경우 기본 응답
                    addChatMessage('해당 질문에 대한 답변을 찾을 수 없습니다. 다른 질문을 해보시거나, 더 구체적으로 질문해주세요. 또는 IT지원팀(texhX@techX.kro.kr)으로 문의해주세요.');

                    // 관련 질문 추천
                    const recommendContainer = document.createElement('div');
                    recommendContainer.className = 'suggested-questions';
                    recommendContainer.innerHTML = `
                <h4>이런 질문은 어떠세요?</h4>
                <div class="suggested-question">비밀번호를 변경하고 싶어요.</div>
                <div class="suggested-question">회의실 예약은 어떻게 하나요?</div>
                <div class="suggested-question">비품 대여는 어떻게 하나요?</div>
            `;
                    chatbotMessages.appendChild(recommendContainer);

                    // 추천된 질문들에 이벤트 리스너 추가
                    recommendContainer.querySelectorAll('.suggested-question').forEach(q => {
                        q.addEventListener('click', function() {
                            const questionText = this.textContent;
                            addChatMessage(questionText, true);
                            generateBotResponse(questionText);
                        });
                    });
                }
            }, 1500); // 1.5초 후 응답
        }

        // 메시지 전송 이벤트
        function sendMessage() {
            const message = chatbotInput.value.trim();
            if (message) {
                addChatMessage(message, true);
                chatbotInput.value = '';
                generateBotResponse(message);
            }
        }

        chatbotSend.addEventListener('click', sendMessage);

        chatbotInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // 추천 질문 클릭 이벤트
        suggestedQuestions.forEach(question => {
            question.addEventListener('click', function() {
                const questionText = this.textContent;
                addChatMessage(questionText, true);
                generateBotResponse(questionText);
            });
        });

        // 챗봇 초기화 버튼
        document.getElementById('chatbot-refresh').addEventListener('click', function() {
            // 모든 메시지 삭제
            while (chatbotMessages.firstChild) {
                chatbotMessages.removeChild(chatbotMessages.firstChild);
            }

            // 초기 메시지 다시 추가
            addChatMessage('안녕하세요! TECH X 그룹웨어 AI 도우미입니다. 그룹웨어 사용 중 궁금한 점이 있으면 무엇이든 물어보세요.');

            // 추천 질문 다시 추가
            const suggestedQuestionsElement = document.createElement('div');
            suggestedQuestionsElement.className = 'suggested-questions';
            suggestedQuestionsElement.innerHTML = `
                <h4>자주 찾는 질문</h4>
                <div class="suggested-question">비밀번호를 변경하고 싶어요.</div>
                <div class="suggested-question">회의실 예약은 어떻게 하나요?</div>
                <div class="suggested-question">결재 문서를 회수할 수 있나요?</div>
            `;
            chatbotMessages.appendChild(suggestedQuestionsElement);

            // 추천 질문에 이벤트 리스너 다시 추가
            suggestedQuestionsElement.querySelectorAll('.suggested-question').forEach(q => {
                q.addEventListener('click', function() {
                    const questionText = this.textContent;
                    addChatMessage(questionText, true);
                    generateBotResponse(questionText);
                });
            });
        });
    });
</script>

<!-- 헤더 관련 스크립트 포함 -->
<div th:replace="fragments/header :: headerScripts"></div>

</body>
</html>
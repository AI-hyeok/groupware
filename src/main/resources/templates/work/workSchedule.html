<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TECH X - 근태 관리</title>
    <link rel="stylesheet" href="/assets/css/work/workSchedule.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- FullCalendar CSS -->
    <link rel="stylesheet" href="https://unpkg.com/fullcalendar@6.1.8/main.min.css">

    <!-- FullCalendar JS -->
    <script src="https://unpkg.com/fullcalendar@6.1.8/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/google-calendar@6.1.8/index.global.min.js"></script>
    <script src="https://unpkg.com/fullcalendar@6.1.8/locales/ko.global.min.js"></script>
    <!-- 헤더 에셋 포함 -->
    <th:block th:replace="fragments/header :: headerAssets"></th:block>
    <!-- 사이드바 스타일 포함 -->
    <link rel="stylesheet" th:href="@{/assets/css/fragments/sidebar-common.css}">

</head>
<body>

    <!-- 헤더 -->
    <!-- 헤더 포함 -->
    <div th:replace="fragments/header :: header"></div>


<div class="container">
    <div class="sidebar">
        <button class="add-button"><i class="fas fa-plus"></i> 휴가 신청</button>
        <ul class="menu">
            <li><a href="/works/overTimeForm"><i class="fas fa-file-alt"></i> 연장 근무 신청</a></li>
            <li class="dropdown active open">
                <div class="dropdown-header">
                    <i class="fas fa-chevron-down dropdown-icon"></i>내 근무
                </div>
                <ul class="submenu">
                    <a href="/attend/main"><li><i class="fas fa-calendar-alt"></i> 휴가/근무</li></a>
                    <a href="/works/workSchedule"><li><i class="fas fa-chart-line"></i> 근무 현황</li></a>
                </ul>
            </li>
        </ul>
    </div>

    <div class="content">
        <div class="tab-menu">
            <a href="/works/workSchedule"><button class="tab-button active">근무현황</button></a>
            <a href="/leaves/leavesHistory"><button class="tab-button">휴가내역</button></a>
            <a href="/attend/annualStatistics"><button class="tab-button">연간통계</button></a>
            <a href="/works/workDetails"><button class="tab-button">근무신청내역</button></a>
        </div>
        <div class="calendar-container">
            <div id="calendar"></div>
        </div>
    </div>

    <!-- 모달 백드롭 -->
    <div class="modal-backdrop" id="modalBackdrop"></div>

    <!-- 향상된 모달 디자인 -->
    <div id="eventModal" class="modal">
        <div class="modal-header">
            <h3 id="modalTitle"></h3>
            <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div id="modalTime" class="event-time"></div>
            <div id="modalReason" class="event-reason"></div>
        </div>
        <div class="modal-footer">
            <button class="modal-button" onclick="closeModal()">닫기</button>
        </div>
    </div>
</div>

<!-- Move JavaScript to the end of body for better loading -->
<script src="/assets/js/work/workSchedule.js"></script>
<script>
    document.querySelector(".add-button").onclick = function() {
        location.href = "/leaves/leavesForm";
    };
</script>
<!-- 헤더 관련 스크립트 포함 -->
<div th:replace="fragments/header :: headerScripts"></div>
<!-- 공통 사이드바 스크립트 포함 -->
<link rel="stylesheet" th:href="@{/assets/js/fragments/sidebar-common.js}">
</body>
</html>